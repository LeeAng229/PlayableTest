window.__require=function e(t,n,o){function i(a,r){if(!n[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var d="function"==typeof __require&&__require;if(!r&&d)return d(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AdaptScreen:[function(e,t,n){"use strict";cc._RF.push(t,"70c89xh/d9GLL4t3vJf7acF","AdaptScreen"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useScale=!1,t.keepScale=!1,t.isSquerAdaptH=!1,t._selfSize=null,t._is_shu_pin=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this._selfSize=this.node.getContentSize(),this.adapter()},t.prototype.adapter=function(){var e=this._selfSize,t=cc.view.getFrameSize(),n=cc.winSize,o=t.height,i=t.width,c=n.height,a=n.width;o<i&&this.isSquerAdaptH&&(c=n.height,a=n.height);var r=i/(i/a>o/c?a/c*o:i),s=o/(i/a>o/c?o:c/a*i),d=Math.max(r,s);this.keepScale?this.useScale?this.node.setScale(d):this.node.setContentSize(e.width*d,e.height*d):this.useScale?(this.node.scaleX=r,this.node.scaleY=s):this.node.setContentSize(e.width*r,e.height*s)},t.prototype.update=function(){var e=cc.view.getFrameSize();e.height<e.width?this._is_shu_pin&&(this._is_shu_pin=!1,this.adapter()):this._is_shu_pin||(this._is_shu_pin=!0,this.adapter())},__decorate([c()],t.prototype,"useScale",void 0),__decorate([c()],t.prototype,"keepScale",void 0),__decorate([c()],t.prototype,"isSquerAdaptH",void 0),__decorate([i],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],AudioTool:[function(e,t,n){"use strict";cc._RF.push(t,"84654wkNkhPH6AJe9wdy71O","AudioTool"),Object.defineProperty(n,"__esModule",{value:!0}),n.GAudioTool=void 0;var o=e("../DataModel/SettingDataModel");n.GAudioTool=null;var i=function(){function e(){this._musicId=0,this._m_v=1,this._s_v=1,this._v_v=1,this._lock=0,this._s_id_list=[]}return e.prototype.playMusic=function(e,t){var n=this;void 0===t&&(t=!0),o.GSettingDM.soundOn&&(void 0===t&&(t=!0),this.stopMusic(),cc.loader.loadRes(e,cc.AudioClip,function(e,o){e?console.log("err ="+JSON.stringify(e)):cc.audioEngine.play(o,t,n._m_v)}))},e.prototype.setMusicVolume=function(e){this._m_v=e,this._musicId&&cc.audioEngine.setVolume(this._musicId,e)},e.prototype.lockMusic=function(){++this._lock,this._lock>0&&this.setMusicVolume(0)},e.prototype.unlockMusic=function(){--this._lock,this._lock<=0&&this.setMusicVolume(this._m_v)},e.prototype.setSoundVolume=function(e){this._s_v=e},e.prototype.playSound=function(e){var t=this;o.GSettingDM.soundOn&&cc.loader.loadRes(e,cc.AudioClip,function(e,n){if(e)return console.log("err ="+JSON.stringify(e)),0;var o=cc.audioEngine.play(n,!1,t._s_v);return t._s_id_list.push(o),o})},e.prototype.stopSound=function(e){e&&cc.audioEngine.stop(e)},e.prototype.setVoiceVolume=function(e){this._v_v=e},e.prototype.stopMusic=function(){cc.audioEngine.stop(this._musicId)},e.prototype.stopAllSoundExceptMusic=function(){for(var e=0;e<this._s_id_list.length;e++){var t=this._s_id_list[e];cc.audioEngine.stop(t)}this._s_id_list=[]},e.prototype.stopAllSound=function(){cc.audioEngine.stopAll()},e}();n.GAudioTool=new i,cc._RF.pop()},{"../DataModel/SettingDataModel":"SettingDataModel"}],Base:[function(e,t,n){"use strict";cc._RF.push(t,"37be1Kb1stIQaEsVMZwlLJU","Base"),Object.defineProperty(n,"__esModule",{value:!0}),n.core=void 0;var o=function(){function e(){}return e.random=function(e,t){return null==e?Math.random():(t||(t=e,e=0),Math.floor(Math.random()*(t-e+1)+e))},e}();n.core=o,cc._RF.pop()},{}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"4c8b544X89GdKMIjbM4kkq8","Config"),Object.defineProperty(n,"__esModule",{value:!0}),n.GCfg=void 0,n.GCfg={},cc._RF.pop()},{}],GameDataModel:[function(e,t,n){"use strict";cc._RF.push(t,"01fa3r7fPJLmaxHJlwS6CHm","GameDataModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.GGameDM=void 0;var o=e("../../Framework/View/Page/PageManager");n.GGameDM=null;var i=function(){function e(){this.turn_cnt=0,this.now_select_mj=null,this.eliminate_cnt=0,this.wrong_cnt=0,this.eff_id_map={39:"1",35:"2",38:"3",36:"4",41:"5",37:"6",42:"7",40:"8"},this.is_lock=0}return e.prototype.clear=function(){this.turn_cnt=0,this.now_select_mj=null,this.eliminate_cnt=0,this.wrong_cnt=0},e.prototype.btn_paly_now=function(){var e=o.GPageMgr.getPage("Page_Main");e&&e.btn_paly_now()},e.prototype.lock=function(){this.is_lock++},e.prototype.unlock=function(){this.is_lock--},e.prototype.showNodeEffMask=function(){var e=o.GPageMgr.getPage("Page_Main");e&&e.showNodeEffMask()},e.prototype.showWarning=function(){var e=o.GPageMgr.getPage("Page_Main");e&&e.showWarning()},e.prototype.showGuide=function(){var e=o.GPageMgr.getPage("Page_Main");e&&e.showGuide()},e.prototype.hideGuide=function(){var e=o.GPageMgr.getPage("Page_Main");e&&e.hideGuide()},e}();n.GGameDM=new i,cc._RF.pop()},{"../../Framework/View/Page/PageManager":"PageManager"}],GameTool:[function(e,t,n){"use strict";cc._RF.push(t,"213bd2eyjhN9rhSjYPBXIMU","GameTool"),Object.defineProperty(n,"__esModule",{value:!0}),n.GGameTool=void 0,n.GGameTool=null;n.GGameTool=new function(){},cc._RF.pop()},{}],HandleItem:[function(e,t,n){"use strict";cc._RF.push(t,"dcec3f0FDFPmpUQs0aDrP0s","HandleItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),__decorate([i],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],Helper:[function(e,t,n){"use strict";cc._RF.push(t,"c71dfQc2AdCiYQGugc5r07t","Helper"),Object.defineProperty(n,"__esModule",{value:!0}),n.GHelper=void 0;var o=e("../../Platform/Config/ResBuffer"),i=e("../Extention/TipLabel"),c=function(){function e(){}return e.shuffle=function(e){for(var t=void 0,n=void 0,o=e.length;o;t=Math.floor(Math.random()*o),n=e[--o],e[o]=e[t],e[t]=n);return e},e.difference=function(e,t){return new Array,e.filter(function(e){return-1==t.indexOf(e)})},e.createNode=function(e){return(new cc.Node).addComponent(e)},e.getDistance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.showTip=function(e,t){i.GTipLabel.show(e,t)},e.createAnimation=function(e,t,n,i,c,a){t=t||cc.WrapMode.Normal,n=n||10;var r=this.createNode(cc.Sprite).node.addComponent(cc.Animation),s=e;if(o.GResBuffer.ani_res_map.has(s)){var d=o.GResBuffer.ani_res_map.get(s);c?(r.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,r.node.setContentSize(c)):r.node.setContentSize(d[0].getOriginalSize()),d.sort(function(e,t){return parseInt(e.name)-parseInt(t.name)});for(var u=[],l=d.length,p=0;p<l;p++)u.push(d[p]);if(a)for(p=l-1;p>=0;p--)u.push(d[p]),u.push(d[p]);var _=cc.AnimationClip.createWithSpriteFrames(u,n);_.name="run",_.wrapMode=t,r.addClip(_),r.play("run"),r.on("finished",function(){var e=!0;i&&(e=i()),0!=e&&r.node.removeFromParent()}),r.on("end",function(){var e=!0;i&&(e=i()),0!=e&&r.node.removeFromParent()})}else cc.loader.loadResDir(s,cc.SpriteFrame,function(e,a){var d=a;o.GResBuffer.ani_res_map.set(s,d),c?(r.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,r.node.setContentSize(c)):r.node.setContentSize(d[0].getOriginalSize()),d.sort(function(e,t){return parseInt(e.name)-parseInt(t.name)});var u=cc.AnimationClip.createWithSpriteFrames(d,n);u.name="run",u.wrapMode=t,r.addClip(u),r.play("run"),r.on("finished",function(){var e=!0;i&&(e=i()),0!=e&&r.node.removeFromParent()})});return r},e.positionTransducer=function(e,t){var n=t.parent.convertToWorldSpaceAR(t.getPosition());return e.parent.convertToNodeSpaceAR(n)},e.bulletFlyByParabola=function(e,t,n,o,i,c){var a=[t.x,t.y],r=a[0],s=a[1],d=[n.x,n.y],u=d[0],l=d[1],p=[o.x,o.y],_=p[0],h=p[1];if((r-u)*(r-_)*(u-_)!=0)var f=(s*(u-_)+l*(_-r)+h*(r-u))/((r-u)*(r-_)*(u-_)),g=(s*(_*_-u*u)+l*(r*r-_*_)+h*(u*u-r*r))/((r-u)*(r-_)*(u-_)),m=(s*u*_*(u-_)+l*r*_*(_-r)+h*r*u*(r-u))/((r-u)*(r-_)*(u-_)),v=Date.now(),y=setInterval(function(){var n=(Date.now()-v)/i;if(n>=1)clearInterval(y),e.setPosition(o),c&&c();else{var a=t.x+n*(o.x-t.x),r=f*a*a+g*a+m;e.setPosition(cc.v2(a,r))}},16);else e.setPosition(o),c&&c()},e.createSprite=function(t,n,o,i){if(!t)return e.createNode(cc.Sprite);i=i||"";var c=e.createNode(cc.Sprite),a=typeof t;if("string"==a){var r={path:t,rect:o,name:t+i};e.createSpriteFrame(r,function(e){if(e){var t=c.node.width,o=c.node.height;c.spriteFrame=e,t>0&&o>0&&(c.node.width=t,c.node.height=o),n&&n(c)}})}else if("object"==a){var s=cc.js.getClassName(t);if("cc.Texture2D"==s){var d;d=o?new cc.SpriteFrame(t,o):new cc.SpriteFrame(t);var u=c.node.width,l=c.node.height;c.spriteFrame=d,u>0&&l>0&&(c.node.width=u,c.node.height=l)}else"cc.SpriteFrame"==s?c.spriteFrame=t:e.createSpriteFrame(t,function(e){if(e){var t=c.node.width,n=c.node.height;c.spriteFrame=e,t>0&&n>0&&(c.node.width=t,c.node.height=n)}});n&&n(c)}return c},e.createSpriteFrame=function(e,t){if(e.name=e.name||e.path,e.name=e.name.replace(".png",""),e.name=e.name.replace(".jpg",""),e.texture){var n;return n=e.rect?new cc.SpriteFrame(e.texture,e.rect):new cc.SpriteFrame(e.texture),void(t&&t(n))}e.path&&cc.loader.loadRes(e.path,cc.SpriteFrame,function(n,o){if(n)return console.error(n),void t();e.rect&&o.setRect(e.rect),t&&t(o)})},e}();n.GHelper=c,cc._RF.pop()},{"../../Platform/Config/ResBuffer":"ResBuffer","../Extention/TipLabel":"TipLabel"}],IGame:[function(e,t,n){"use strict";cc._RF.push(t,"a2dd1MF0fRI07mnwjorSXX0","IGame"),Object.defineProperty(n,"__esModule",{value:!0}),n.IGame=void 0;var o=e("./Extention/TipLabel"),i=e("./View/Page/PageManager"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.onPreInitDone()},t.prototype.onPreInitDone=function(){var e=new cc.Node;e.addComponent(i.PageManager),e.parent=this.node.parent;var t=new cc.Node;t.addComponent(o.TipLabel),t.parent=this.node.parent},t}(cc.Component);n.IGame=c,cc._RF.pop()},{"./Extention/TipLabel":"TipLabel","./View/Page/PageManager":"PageManager"}],LongScreenAdapter:[function(e,t,n){"use strict";cc._RF.push(t,"87f71JzLBlN27FnIkIgRriU","LongScreenAdapter"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){var e=cc.view.getFrameSize();if(e.height/e.width>2){var t=this.node.getComponent(cc.Widget);t&&(console.log("LongScreenAdapter"),t.top+=68)}},__decorate([i],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],MahjongPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"eb153Lx9DJKJJqG1Fam+c7l","MahjongPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Framework/Logic/AudioTool"),i=e("../../Config/ResBuffer"),c=e("../../DataModel/GameDataModel"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._node_icon=null,t._sp_icon=null,t._node_red=null,t._node_green=null,t._mj_id=1,t.is_first_guide_mj=!1,t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"mj_id",{get:function(){return this._mj_id},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._node_icon=this.node.getChildByName("node_icon"),this._sp_icon=this._node_icon.getComponent(cc.Sprite),this._node_red=this._node_icon.getChildByName("node_red"),this._node_green=this._node_icon.getChildByName("node_green")},t.prototype.init=function(e){this._mj_id=e;var t="icon_"+e;this._sp_icon.spriteFrame=i.GResBuffer.sf_mj_icon_list[t]},t.prototype.showGreenGuide=function(){this._node_green.active=!0,this._node_green.runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever())},t.prototype.hideGreenGuide=function(){this._node_green.active=!1,this._node_green.stopAllActions(),this._node_green.opacity=255},t.prototype.showWrong=function(){var e=this;c.GGameDM.lock(),c.GGameDM.showWarning(),o.GAudioTool.playSound("Common/Audio/cuowu"),this._node_green.active=!1,this._node_red.active=!0,this._node_icon.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,.95,.95),cc.rotateBy(.1,5)),cc.spawn(cc.scaleTo(.1,.9,.9),cc.rotateBy(.1,-5)),cc.spawn(cc.scaleTo(.1,.95,.95),cc.rotateBy(.1,-5)),cc.spawn(cc.scaleTo(.1,1,1),cc.rotateBy(.1,5)),cc.callFunc(function(){e._node_red.active=!1,e._node_icon.scale=1,e._node_icon.angle=0,c.GGameDM.unlock()})))},t.prototype.eliminate=function(e){if(void 0===e&&(e=null),e&&e instanceof n){this.node.parent=this.node.parent.parent,e.node.parent=e.node.parent.parent;var t=this.node.convertToWorldSpaceAR(cc.Vec3.ZERO),i=e.node.convertToWorldSpaceAR(cc.Vec3.ZERO),a=t.add(i).div(2),r=this.node.parent.convertToNodeSpaceAR(a),s=this;c.GGameDM.showNodeEffMask();var d=this.node.position.clone(),u=e.node.position.clone(),l=(d.y+u.y)/2,p=this.node.width/2+8,_=!1;d.x<u.x?_=!0:d.x===u.x&&(_=d.y>u.y),_?(e.node.zIndex=cc.macro.MAX_ZINDEX,this.node.zIndex=cc.macro.MAX_ZINDEX-1):(this.node.zIndex=cc.macro.MAX_ZINDEX,e.node.zIndex=cc.macro.MAX_ZINDEX-1);var h=cc.v2(r.x-p,r.y),f=cc.v2(r.x+p,r.y),g=_?cc.v2(d.x-500,d.y):cc.v2(d.x+500,d.y),m=_?cc.v2(h.x+150,l):cc.v2(f.x-150,l),v=_?cc.v2(u.x+500,u.y):cc.v2(u.x-500,u.y),y=_?cc.v2(f.x-150,l):cc.v2(h.x+150,l);this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(.6,[g,m,_?h:f]),cc.scaleTo(.6,1.3)),cc.callFunc(function(){o.GAudioTool.playSound("Common/Audio/xiaosan"),s.playEliminateEffect(r)}),cc.delayTime(.5),cc.callFunc(function(){s.node.destroy(),e.node.destroy()}))),e.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(.6,[v,y,_?f:h]),cc.scaleTo(.6,1.3)),cc.delayTime(.5))),this._node_green.active=!1,e._node_green.active=!1}else o.GAudioTool.playSound("Common/Audio/xiaosan"),c.GGameDM.showNodeEffMask(),this._node_green.active=!1,this.playEliminateEffect(this.node.position),this.node.destroy()},t.prototype.playEliminateEffect=function(e){var t=cc.instantiate(i.GResBuffer.prefab_list.EliminateEffPrefab),n=t.getChildByName("node_icon");n.scale=0,t.parent=this.node.parent,t.position=e,t.zIndex=0,n.runAction(cc.sequence(cc.delayTime(.1),cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.fadeTo(.5,0),cc.callFunc(function(){t.destroy()})))},t.prototype.btn_click=function(){c.GGameDM.is_lock||(o.GAudioTool.playSound("Common/Audio/dianji"),c.GGameDM.hideGuide(),c.GGameDM.now_select_mj?c.GGameDM.now_select_mj==this?(c.GGameDM.now_select_mj._node_green.active=!1,c.GGameDM.now_select_mj=null):c.GGameDM.now_select_mj._mj_id==this._mj_id?(c.GGameDM.eliminate_cnt++,c.GGameDM.now_select_mj.eliminate(this),c.GGameDM.now_select_mj=null,c.GGameDM.eliminate_cnt>=8&&c.GGameDM.btn_paly_now()):(c.GGameDM.wrong_cnt++,c.GGameDM.now_select_mj.showWrong(),this.showWrong(),c.GGameDM.now_select_mj=null,c.GGameDM.wrong_cnt>=3&&c.GGameDM.btn_paly_now()):(c.GGameDM.now_select_mj=this,this._node_green.active=!0),0==c.GGameDM.eliminate_cnt&&c.GGameDM.showGuide())},n=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../../Framework/Logic/AudioTool":"AudioTool","../../Config/ResBuffer":"ResBuffer","../../DataModel/GameDataModel":"GameDataModel"}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"edd28huEspP0rR8C88SxyHr","Main"),Object.defineProperty(n,"__esModule",{value:!0}),n.Main=void 0;var o=e("./Framework/View/Page/PageManager"),i=e("./Framework/IGame"),c=e("./Platform/Config/ResBuffer"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onPreInitDone=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return cc.game.setFrameRate(59),e.prototype.onPreInitDone.call(this),[4,c.GResBuffer.init()];case 1:return t.sent(),o.GPageMgr.openPage("Page_Main"),[2]}})})},__decorate([r],t)}(i.IGame));n.Main=s,cc._RF.pop()},{"./Framework/IGame":"IGame","./Framework/View/Page/PageManager":"PageManager","./Platform/Config/ResBuffer":"ResBuffer"}],PageManager:[function(e,t,n){"use strict";cc._RF.push(t,"7325edzQF9O2qsILOPWibJ+","PageManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.PageManager=n.GPageMgr=void 0;var o=cc._decorator,i=o.ccclass;o.property,n.GPageMgr=null;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._key_path={},t._pages={},t}return __extends(t,e),t.prototype.onLoad=function(){n.GPageMgr=this,this.registerKeyPath("Page","Platform/View/Page/Layout/")},t.prototype.registerKeyPath=function(e,t){this._key_path[e]=t},t.prototype.getPage=function(e){return this._pages[e]},t.prototype.isPageOpened=function(e){return!!this.getPage(e)},t.prototype.openPage=function(e,t){var n=this,o=this.getPage(e);if(!o){var i=e.substring(0,e.indexOf("_"));return cc.loader.loadRes(this._key_path[i]+e,function(o,i){if(o)cc.error(o);else{if(n._pages[e])return;var c=cc.instantiate(i);c.parent=n.node,n._pages[e]=c.getComponent(e),void 0!==n._pages[e].onOpen&&n._pages[e].onOpen(t),cc.log("open page success + "+e)}}),o}o.node.active||(o.node.active=!0)},t.prototype.closePage=function(e){var t=this._pages[e];this._pages[e]=null,delete this._pages[e],t&&t.node.destroy()},t.prototype.refreshPage=function(e){var t=this.getPage(e);t&&t.refresh&&t.refresh()},t.prototype.closeAll=function(){for(var e in this._pages)this._pages[e]=null,this._pages[e].node.destroy();this._pages={}},t.prototype.closeAllExceptPage=function(e){for(var t in this._pages)t!=e&&(this._pages[t]=null,delete this._pages[t],this._pages[t].node.destroy())},__decorate([i],t)}(cc.Component);n.PageManager=c,cc._RF.pop()},{}],Page_Main:[function(e,t,n){"use strict";cc._RF.push(t,"71fc8YEnt5PPoCySW2MYje6","Page_Main"),Object.defineProperty(n,"__esModule",{value:!0}),n.Page_Main=void 0;var o=e("../../../Framework/DataModel/SettingDataModel"),i=e("../../../Framework/Logic/AudioTool"),c=e("../../../Framework/Logic/Helper"),a=e("../../../Framework/View/Page/PageManager"),r=e("../../DataModel/GameDataModel"),s=e("../Widget/MahjongPrefab"),d=cc._decorator,u=d.ccclass,l=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_bg=null,t.node_game=null,t.node_adapter=null,t.node_finish=null,t.node_fail=null,t.node_ui=null,t.node_ly=null,t.mahjongPrefab=null,t._is_open_bgm=!1,t._guideTargetMj=null,t._is_shu_pin=!1,t}return __extends(t,e),t.prototype.start=function(){var e=this;r.GGameDM.clear(),this.adapterH(),this.node.getChildByName("node_top").off(cc.Node.EventType.TOUCH_START),this.node.getChildByName("node_top").on(cc.Node.EventType.TOUCH_START,function(){}),this.node.getChildByName("node_top")._hitTest=function(){return e.setAotoJunp(),e._is_open_bgm||(o.GSettingDM.soundOn=!0,i.GAudioTool.playMusic("Common/Audio/bgm"),e._is_open_bgm=!0),!1},this.initMj(),onGameLoaded(),window.gameReady&&window.gameReady()},t.prototype.setAotoJunp=function(){var e=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(10),cc.callFunc(function(){e.btn_paly_now()})))},t.prototype.showNodeEffMask=function(){var e=this.node_adapter.getChildByName("node_eff_mask");e.opacity=0,e.active=!0,e.runAction(cc.sequence(cc.callFunc(function(){e.opacity=128}),cc.delayTime(.72),cc.callFunc(function(){}),cc.fadeTo(.36,0),cc.callFunc(function(){e.active=!1})))},t.prototype.initMj=function(){for(var e=this,t=[],n=1;n<=34;n++)t.push(n);t=c.GHelper.shuffle(t);var o=[];for(n=0;n<20;n++)o.push(t[n]),o.push(t[n]);o=c.GHelper.shuffle(o),this.node_ly.children.forEach(function(e){e.getComponent(s.default).init(o.pop())}),setTimeout(function(){e.showGuide()},100)},t.prototype.showWarning=function(){var e=this.node_adapter.getChildByName("node_warning");e.active=!0,e.stopAllActions(),e.opacity=0,e.runAction(cc.sequence(cc.fadeTo(.2,255),cc.fadeTo(.2,0),cc.fadeTo(.2,255),cc.fadeTo(.2,0),cc.callFunc(function(){e.active=!1})))},t.prototype.showGuide=function(){var e=this.node_adapter.getChildByName("node_finger");if(e){e.active=!0,e.stopAllActions(),e.scale=1;var t=cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2).easing(cc.easeSineInOut()),cc.scaleTo(.5,1).easing(cc.easeSineInOut())));e.runAction(t);var n=this.node_ly.children.filter(function(e){return e.active}).map(function(e){return e.getComponent(s.default)}).filter(function(e){return e&&e.isValid});if(0!==n.length){var o=null,i=r.GGameDM.now_select_mj;if(i&&i.isValid){var c=i.mj_id;o=n.find(function(e){return e.mj_id===c&&e!==i})}else{var a=n.reduce(function(e,t){return e[t.mj_id]=(e[t.mj_id]||0)+1,e},{}),d=Object.keys(a).map(Number).filter(function(e){return a[e]>1});if(d.length>0){var u=d[Math.floor(Math.random()*d.length)],l=n.filter(function(e){return e.mj_id===u});o=l[Math.floor(Math.random()*l.length)]}}o?(this._guideTargetMj=o,e.x=o.node.x,e.y=o.node.y,o.showGreenGuide()):e.active=!1}else e.active=!1}},t.prototype.hideGuide=function(){var e=this.node_adapter.getChildByName("node_finger");e&&(e.stopAllActions(),e.active=!1),this._guideTargetMj&&(this._guideTargetMj.hideGreenGuide(),this._guideTargetMj=null),this.unschedule(this.showGuide),this.scheduleOnce(this.showGuide,5)},t.prototype.openWinPage=function(){var e=this.node_finish.getChildByName("mask"),t=this.node_finish.getChildByName("btn_download");e.opacity=0,t.opacity=0,t.scale=0,this.node_finish.active=!0,e.runAction(cc.fadeTo(.5,128)),t.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(.5),cc.scaleTo(.5,1).easing(cc.easeBackOut())),cc.callFunc(function(){t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.6,1.1),cc.scaleTo(.6,1))))})))},t.prototype.openFailPage=function(){var e=this.node_fail.getChildByName("mask"),t=this.node_fail.getChildByName("btn_download"),n=this.node_fail.getChildByName("btn_retry"),o=this.node_fail.getChildByName("bg");e.opacity=0,o.opacity=0,o.scale=0,t.opacity=0,n.opacity=0,t.scale=0,n.scale=0,this.node_fail.active=!0,e.runAction(cc.fadeTo(.5,128)),o.runAction(cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(function(){i.GAudioTool.playSound("Common/Audio/jieshu")}))),t.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(.5),cc.scaleTo(.5,1).easing(cc.easeBackOut())),cc.callFunc(function(){t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.6,1.1),cc.scaleTo(.6,1))))}))),n.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(.5),cc.scaleTo(.5,1).easing(cc.easeBackOut())),cc.callFunc(function(){})))},t.prototype.adapterH=function(){var e=cc.view.getFrameSize();e.height<e.width?(this.node_adapter.scale=1.4,this.node_adapter.y=0,this.node_ui.getChildByName("node_lv_heng").active=!0,this.node_ui.getChildByName("node_lv_shu").active=!1,this.node_ui.getChildByName("btn_play_heng").active=!0,this.node_ui.getChildByName("btn_play_shu").active=!1):(this.node_adapter.scale=1,this.node_adapter.y=0,this.node_ui.getChildByName("node_lv_heng").active=!1,this.node_ui.getChildByName("node_lv_shu").active=!0,this.node_ui.getChildByName("btn_play_heng").active=!1,this.node_ui.getChildByName("btn_play_shu").active=!0)},t.prototype.btn_retry=function(){i.GAudioTool.stopAllSound(),a.GPageMgr.closePage("Page_Main"),a.GPageMgr.openPage("Page_Main")},t.prototype.btn_paly_now=function(){o.GSettingDM.soundOn=!1,i.GAudioTool.stopAllSound(),window.install&&window.install(),showAd&&showAd(),this.gameEnd()},t.prototype.gameEnd=function(){window.gameEnd&&window.gameEnd()},t.prototype.update=function(){var e=cc.view.getFrameSize();e.height<e.width?this._is_shu_pin&&(this._is_shu_pin=!1,this.adapterH()):this._is_shu_pin||(this._is_shu_pin=!0,this.adapterH())},__decorate([l(cc.Sprite)],t.prototype,"sp_bg",void 0),__decorate([l(cc.Node)],t.prototype,"node_game",void 0),__decorate([l(cc.Node)],t.prototype,"node_adapter",void 0),__decorate([l(cc.Node)],t.prototype,"node_finish",void 0),__decorate([l(cc.Node)],t.prototype,"node_fail",void 0),__decorate([l(cc.Node)],t.prototype,"node_ui",void 0),__decorate([l(cc.Node)],t.prototype,"node_ly",void 0),__decorate([l(cc.Prefab)],t.prototype,"mahjongPrefab",void 0),__decorate([u],t)}(cc.Component);n.Page_Main=p,cc._RF.pop()},{"../../../Framework/DataModel/SettingDataModel":"SettingDataModel","../../../Framework/Logic/AudioTool":"AudioTool","../../../Framework/Logic/Helper":"Helper","../../../Framework/View/Page/PageManager":"PageManager","../../DataModel/GameDataModel":"GameDataModel","../Widget/MahjongPrefab":"MahjongPrefab"}],Page:[function(e,t,n){"use strict";cc._RF.push(t,"4eab60Ms6ZK24yso+EJbk01","Page"),Object.defineProperty(n,"__esModule",{value:!0}),n.Page=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t}(cc.Component);n.Page=o,cc._RF.pop()},{}],ResBuffer:[function(e,t,n){"use strict";cc._RF.push(t,"fd363YiXedPVqSvD4EJmD35","ResBuffer"),Object.defineProperty(n,"__esModule",{value:!0}),n.GResBuffer=void 0,n.GResBuffer=null;var o=function(){function e(){this.ani_res_map=new Map,this.sf_mj_icon_list={},this.prefab_list={}}return e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=this,[4,this.loadPicRes("Platform/Image/Icon")];case 1:return e.sf_mj_icon_list=n.sent(),t=this,[4,this.loadPrefabRes("Platform/Prefab")];case 2:return t.prefab_list=n.sent(),[2]}})})},e.prototype.loadPicRes=function(e){return new Promise(function(t){var n=e;cc.loader.loadResDir(n,cc.SpriteFrame,function(){},function(e,n){if(e)console.error("load img res err : ",e);else{for(var o={},i=0;i<n.length;i++)o[n[i].name]=n[i];t(o)}})})},e.prototype.loadPrefabRes=function(e){return new Promise(function(t){var n=e;cc.loader.loadResDir(n,cc.Prefab,function(){},function(e,n){if(e)console.error("load prefab res err : ",e);else{for(var o={},i=0;i<n.length;i++)o[n[i].name]=n[i];t(o)}})})},e.prototype.loadAnimation=function(e){var t=this;return new Promise(function(n){cc.loader.loadResDir(e,cc.SpriteFrame,function(o,i){var c=i;t.ani_res_map.set(e,c),n(c)})})},e}();n.GResBuffer=new o,cc._RF.pop()},{}],SettingDataModel:[function(e,t,n){"use strict";cc._RF.push(t,"a9c5eo4IMhMqZNxpgfT/2nc","SettingDataModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.GSettingDM=void 0,n.GSettingDM=null;n.GSettingDM=new function(){this.soundOn=!1,this.music_value=1,this.sound_value=1,this.voice_value=1},cc._RF.pop()},{}],TipLabel:[function(e,t,n){"use strict";cc._RF.push(t,"67e0emmFjtNm6iPBZqwN0VT","TipLabel"),Object.defineProperty(n,"__esModule",{value:!0}),n.TipLabel=n.GTipLabel=void 0;var o=e("../Logic/Helper"),i=cc._decorator,c=i.ccclass;i.property,n.GTipLabel=null;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._time=-1,t._bg=null,t._lbl_tip=null,t}return __extends(t,e),t.prototype.onLoad=function(){n.GTipLabel=this,this.node.setPosition(cc.winSize.width/2,cc.winSize.height/2+186),this._lbl_tip=o.GHelper.createNode(cc.Label),this._lbl_tip.node.parent=this.node,this._lbl_tip.fontSize=32,this._lbl_tip.lineHeight=46,this._lbl_tip.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this._lbl_tip.node.width=700,this._lbl_tip.node.color=cc.color(200,200,200),this._lbl_tip.node.addComponent(cc.LabelOutline).color=cc.color(0,0,0),this.node.active=!1},t.prototype.show=function(e,t){var n=this;this._lbl_tip.string=e||"no string tip!",this._time=t||3,setTimeout(function(){n._time>0&&(n.node.active=!0)},500)},t.prototype.update=function(e){this._time-=e,this._time<=0&&(this.node.active=!1)},t.prototype.clear=function(){this._time=0,this.node.active=!1},__decorate([c],t)}(cc.Component);n.TipLabel=a,cc._RF.pop()},{"../Logic/Helper":"Helper"}],TipRunning:[function(e,t,n){"use strict";cc._RF.push(t,"2c348wblRRBHIwttToTih4n","TipRunning"),Object.defineProperty(n,"__esModule",{value:!0}),n.TipRunning=n.GTipRunning=void 0;var o=e("../Logic/Helper"),i=cc._decorator,c=i.ccclass;i.property,n.GTipRunning=null;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._time=-1,t._bg=null,t}return __extends(t,e),t.prototype.onLoad=function(){n.GTipRunning=this,this.node.active=!1,this.node.width=cc.winSize.width,this.node.height=cc.winSize.height,this.node.setPosition(cc.winSize.width/2,cc.winSize.height/2),this._bg=o.GHelper.createSprite("Common/Image/Other/running"),this._bg.node.parent=this.node;var e=cc.repeatForever(cc.rotateBy(1,150));this._bg.node.runAction(e)},__decorate([c],t)}(cc.Component);n.TipRunning=a,cc._RF.pop()},{"../Logic/Helper":"Helper"}],UserDataModel:[function(e,t,n){"use strict";cc._RF.push(t,"54ffdKw8oxIUL2XEEGL/EBK","UserDataModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.GUserDM=void 0,n.GUserDM=null;n.GUserDM=new function(){this.screenPosX=750,this.screenPosY=1334},cc._RF.pop()},{}],_ini_:[function(e,t,n){"use strict";cc._RF.push(t,"7e87c2cYgRCY6aEiqM2rsjs","_ini_"),Object.defineProperty(n,"__esModule",{value:!0}),n.EMessageBoxButtonStyle=void 0,function(e){e[e.Cancel=0]="Cancel",e[e.OK=1]="OK",e[e.OK_Cancel=2]="OK_Cancel"}(n.EMessageBoxButtonStyle||(n.EMessageBoxButtonStyle={})),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"f85bcIdsxRMKbMZbn9+RziR","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["Base","SettingDataModel","TipLabel","TipRunning","IGame","AdaptScreen","AudioTool","Helper","Page","PageManager","Main","Config","ResBuffer","_ini_","GameDataModel","UserDataModel","GameTool","HandleItem","LongScreenAdapter","Page_Main","MahjongPrefab","use_v2.0.x_cc.Toggle_event"]);